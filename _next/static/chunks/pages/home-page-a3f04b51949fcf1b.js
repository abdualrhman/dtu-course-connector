(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[254],{4308:function(e,t,r){(window.__NEXT_P=window.__NEXT_P||[]).push(["/home-page",function(){return r(3619)}])},3619:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return c}});var n=r(5893),o=r(7294),s=r(9058),l=r.n(s),i=r(9774),a=e=>{let{courseDetail:t}=e;return(0,n.jsx)("div",{children:(0,n.jsxs)("a",{href:"https://kurser.dtu.dk/course/".concat(t.course_code),className:"list-group-item list-group-item-action flex-column align-items-start",children:[(0,n.jsx)("div",{className:"d-flex w-100 justify-content-between",children:(0,n.jsx)("h5",{className:"mb-1",children:t.title})}),(0,n.jsxs)("p",{className:"mb-1",children:["Prerequisites: ",t.prereqs]}),(0,n.jsxs)("small",{className:"text-muted",children:["ECTS: ",t.ects]})]})})};function d(e){let{graph:t}=e;l().use(r(9142)),l().use(r(3878));let s=(0,o.useRef)(null),d=(0,o.useRef)(null),[c,u]=(0,o.useState)(!1),[p,h]=(0,o.useState)(null),[f,m]=(0,o.useState)({top:0,left:0});(0,o.useEffect)(()=>(s.current&&x(t,s.current),()=>{var e;null===(e=d.current)||void 0===e||e.destroy(),d.current=null}),[t]),(0,o.useEffect)(()=>{let e=()=>u(!1);return window.addEventListener("resize",e),()=>window.removeEventListener("resize",e)},[]);let x=(e,t)=>{d.current&&d.current.destroy(),d.current=l()({container:t,elements:e.elements,style:[{selector:"node",style:{label:"data(id)","background-color":"#007bff",color:"#fff","text-outline-width":2,"text-outline-color":"#007bff","border-width":2,"font-size":"10px","text-valign":"center","text-halign":"center",width:"40px",height:"40px"}},{selector:"edge",style:{width:3,"line-color":"#6c757d","target-arrow-color":"#6c757d","target-arrow-shape":"triangle","curve-style":"bezier"}},{selector:":parent",style:{"background-opacity":.1,"border-width":2,label:"One of the following"}}],layout:{name:"klay"}}),g()},g=()=>{var e;null===(e=d.current)||void 0===e||e.on("tap","node",b)},b=async e=>{let t=e.target.data("id");if(t.length<7){let r=await v(t);r&&(h((0,n.jsx)(a,{courseDetail:r})),m(w(e)),u(!0))}};(0,o.useEffect)(()=>{let e=e=>{var t;(null===(t=s.current)||void 0===t?void 0:t.contains(e.target))||u(!1)};return document.addEventListener("mousedown",e),()=>document.removeEventListener("mousedown",e)},[]);let v=async e=>{try{let t=await fetch("/api/get-course-by-code?code=".concat(e));if(!t.ok)throw Error("Failed to fetch course data");return await t.json()}catch(e){return console.error("Error fetching course data:",e),null}},w=e=>{var t,r,n,o;let{clientX:l,clientY:i}=e.originalEvent,a=null!==(o=null===(t=s.current)||void 0===t?void 0:t.getBoundingClientRect())&&void 0!==o?o:{top:0,left:0},c=(null===(r=d.current)||void 0===r?void 0:r.zoom())||1,u=(null===(n=d.current)||void 0===n?void 0:n.pan())||{x:0,y:0};return{top:(i-a.top-u.y)/c+window.scrollY,left:(l-a.left-u.x)/c+window.scrollX}};return(0,n.jsxs)("div",{style:{position:"relative",marginTop:"1rem",backgroundColor:"#f8f9fa",borderRadius:"8px",padding:"1rem"},children:[(0,n.jsx)("div",{ref:s,style:{width:"100%",height:"70vh",borderRadius:"8px"}}),c&&(0,n.jsx)(i.Z,{id:"node-popover",style:{position:"absolute",top:f.top,left:f.left,zIndex:1e3,maxWidth:"250px",borderRadius:"8px",boxShadow:"0 4px 8px rgba(0, 0, 0, 0.2)"},children:(0,n.jsx)(i.Z.Body,{children:p})})]})}function c(){let[e,t]=(0,o.useState)("01257"),[r,s]=(0,o.useState)(null),l=async t=>{t.preventDefault(),await fetch("/api/course-graph/?courseNumber=".concat(e)).then(e=>e.json()).then(e=>s(e.data)),console.log(r)};return(0,n.jsxs)("div",{style:{padding:"2rem"},children:[(0,n.jsx)("h2",{children:"DTU Course dependency graph"}),(0,n.jsxs)("div",{style:{marginTop:"1rem",padding:"1rem",backgroundColor:"#f8f9fa",borderRadius:"8px",boxShadow:"0 2px 4px rgba(0, 0, 0, 0.1)"},children:[(0,n.jsx)("p",{children:"Many DTU courses come with an extensive list of prerequisites, each with its own dependencies, making study program planning challenging. Use the graph to explore the paths and dependencies for any selected course."}),(0,n.jsx)("p",{children:"Enter a course number to view a graphical representation of the courseâ€™s prerequisites and related courses."}),(0,n.jsx)("div",{className:"form-container",style:{maxWidth:"400px",margin:"auto"},children:(0,n.jsxs)("form",{id:"courseForm",onSubmit:l,children:[(0,n.jsxs)("div",{className:"form-group",style:{marginBottom:"1rem"},children:[(0,n.jsx)("label",{htmlFor:"courseInput",style:{fontWeight:"bold"},children:"Enter Course Number"}),(0,n.jsx)("input",{type:"text",className:"form-control",id:"courseInput",placeholder:"e.g., 01035",value:e,onChange:e=>t(e.target.value),style:{padding:"0.5rem",fontSize:"1rem",borderRadius:"5px",border:"1px solid #ced4da"}})]}),(0,n.jsx)("button",{type:"submit",className:"btn btn-primary",style:{width:"100%",padding:"0.5rem",fontSize:"1rem",fontWeight:"bold",backgroundColor:"#007bff",border:"none",borderRadius:"5px",color:"#fff"},children:"Search"})]})}),(0,n.jsx)("div",{style:{marginTop:"2rem"},children:r?(0,n.jsx)(d,{graph:r}):null})]})]})}}},function(e){e.O(0,[856,903,765,774,888,179],function(){return e(e.s=4308)}),_N_E=e.O()}]);